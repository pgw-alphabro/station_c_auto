from services.gpt_service import call_gpt

async def extract_kpis(business_plan: str, meeting: str) -> str:
    """KPI μ¶”μ¶"""
    prompt = f"""
    λ‹¤μμ€ μ‚¬μ—…κ³„νμ„μ™€ λ―Έν… λ¶„μ„ κ²°κ³Όμ…λ‹λ‹¤. 
    Station C μ§„λ‹¨λ³΄κ³ μ„μ— ν•„μ”ν• ν•µμ‹¬μ„±κ³Όμ§€ν‘(KPI)λ¥Ό μ¶”μ¶ν•μ—¬ μ •λ¦¬ν•΄μ£Όμ„Έμ”. λ§ν¬λ‹¤μ΄μ€ μ μ™Έν•΄μ£Όμ„Έμ”.
    
    μ‚¬μ—…κ³„νμ„ λ¶„μ„:
    {business_plan}
    
    λ―Έν… λ¶„μ„:
    {meeting}
    
    λ‹¤μ ν•μ‹μΌλ΅ KPIλ¥Ό μ •λ¦¬ν•΄μ£Όμ„Έμ”. λ§ν¬λ‹¤μ΄ λ¬Έλ²•μ„ μ‚¬μ©ν•μ§€ λ§κ³  μΌλ° ν…μ¤νΈλ΅ μ‘μ„±ν•΄μ£Όμ„Έμ”:
    
    β–  μ¶”μ¶λ ν•µμ‹¬μ„±κ³Όμ§€ν‘ (KPI)
    
    π”Ή κ³µν†µ KPI
    β€Ά λ§¤μ¶: [ν„μ¬] β†’ [λ©ν‘] (λ©ν‘λ…„λ„)
    β€Ά κ³ μ©: [ν„μ¬] β†’ [λ©ν‘] (λ©ν‘λ…„λ„)
    β€Ά ν¬μ: [ν„μ¬] β†’ [λ©ν‘] (λ©ν‘λ…„λ„)
    
    π”Ή μμ¨ μ‹μ¥κ²€μ¦ KPI
    1. PSF μ„¤λ¬Έμ΅°μ‚¬: [λ©ν‘ μμΉ]λ…
    2. κ°€κ²©κ²€μ¦: [λ©ν‘ μμΉ]λ…
    3. MAU: [λ©ν‘ μμΉ]λ…
    4. λ¦¬ν…μ…μ¨: [λ©ν‘ μμΉ]%
    5. LTV:CAC λΉ„μ¨: [λ©ν‘ μμΉ]λ°°
    6. PMF Survey: [λ©ν‘ μμΉ]%
    7. ννΈλ„μ‹­: [λ©ν‘ μμΉ]κ° κΈ°κ΄€
    8. κΈ°νƒ€ KPI: [μ¶”κ°€ KPIλ“¤]
    
    μ •λ³΄κ°€ λ…ν™•ν•μ§€ μ•μ€ κ²½μ°λ” ν‘μ‹ν•μ§€ λ§μ•„μ£Όμ„Έμ”,λ§ν¬λ‹¤μ΄μ€ μ μ™Έν•΄μ£Όμ„Έμ”.
    """
    
    return await call_gpt(prompt)
