<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Station C 2025 ì§„ë‹¨ë³´ê³ ì„œ ìë™ìƒì„± ì‹œìŠ¤í…œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Lato', 'Helvetica Neue', Arial, sans-serif;
            background: #f9f7f4;
            min-height: 100vh;
            padding: 20px;
            color: #382110;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 4px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid #ddd;
        }

        .header {
            background: #382110;
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
            min-height: 80vh;
        }

        .upload-section {
            background: #faf8f5;
            padding: 40px;
            border-right: 1px solid #e6e6e6;
        }

        .analysis-section {
            background: white;
            padding: 40px;
        }

        .section-title {
            font-size: 1.5em;
            color: #382110;
            margin-bottom: 25px;
            border-bottom: 1px solid #e6e6e6;
            padding-bottom: 10px;
            font-weight: 600;
        }

        .upload-area {
            border: 3px dashed #bdc3c7;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            margin: 20px 0;
            background: white;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .upload-area:hover {
            border-color: #3498db;
            background: #f8f9fa;
        }

        .upload-area.dragover {
            border-color: #2ecc71;
            background: #d5f4e6;
        }

        .file-list {
            margin-top: 20px;
        }

        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border: 1px solid #e9ecef;
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .file-details {
            display: flex;
            flex-direction: column;
        }

        .file-name {
            font-weight: 600;
            color: #2c3e50;
        }

        .file-size {
            font-size: 0.8em;
            color: #95a5a6;
        }

        .btn {
            background: #00635d;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: #004d47;
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .btn-danger {
            background: #d32f2f;
        }

        .btn-success {
            background: #00635d;
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 0.9em;
        }

        .analysis-status {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .status-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
        }

        .status-pending {
            background: #f39c12;
            color: white;
        }

        .status-processing {
            background: #3498db;
            color: white;
        }

        .status-complete {
            background: #27ae60;
            color: white;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-info {
            margin: 15px 0;
            text-align: center;
        }

        .progress-text {
            font-size: 1.1em;
            font-weight: 600;
            color: #2c3e50;
        }

        .extracted-content {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            max-height: 400px;
            overflow-y: auto;
        }

        .content-section {
            margin-bottom: 25px;
        }

        .content-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 8px;
            font-size: 1.1em;
        }

        .content-text {
            font-size: 1em;
            line-height: 1.8;
            color: #34495e;
            white-space: pre-line;
            font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif;
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
        }

        .tab {
            flex: 1;
            padding: 12px;
            background: #e9ecef;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: #00635d;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .report-output {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif;
            font-size: 1em;
            line-height: 1.8;
            max-height: 500px;
            overflow-y: auto;
            white-space: pre-line;
        }

        .copy-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            font-size: 0.9em;
        }

        .copy-btn:hover {
            background: #229954;
        }

        .ai-analysis-box {
            background: #382110;
            color: white;
            border-radius: 4px;
            padding: 20px;
            margin: 20px 0;
        }

        .ai-analysis-box h3 {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .mentor-input-section {
            background: #fff3e0;
            border: 2px solid #ff9800;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .mentor-input-section h3 {
            color: #e65100;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .mentor-textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif;
            resize: vertical;
            margin-top: 10px;
        }

        .mentor-textarea:focus {
            outline: none;
            border-color: #ff9800;
            box-shadow: 0 0 0 2px rgba(255, 152, 0, 0.1);
        }

        .input-label {
            font-weight: 600;
            color: #5d4037;
            display: block;
            margin-top: 15px;
            margin-bottom: 5px;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .upload-section {
                border-right: none;
                border-bottom: 1px solid #e9ecef;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Station C 2025 AI ì§„ë‹¨ë³´ê³ ì„œ</h1>
            <p>AI ê¸°ë°˜ ìë™ ì§„ë‹¨ë³´ê³ ì„œ ìƒì„± ì‹œìŠ¤í…œ (ë°ëª¨ ë²„ì „)</p>
        </div>

        <div class="main-content">
            <div class="upload-section">
                <h2 class="section-title">íŒŒì¼ ì—…ë¡œë“œ</h2>
                
                <div class="tabs">
                    <button class="tab active" onclick="switchUploadTab('business-plan')">ì‚¬ì—…ê³„íšì„œ</button>
                    <button class="tab" onclick="switchUploadTab('meeting-audio')">ë¯¸íŒ… ì˜¤ë””ì˜¤</button>
                </div>

                <div class="tab-content active" id="business-plan-tab">
                    <div class="upload-area" id="businessPlanUpload" onclick="triggerFileUpload('businessPlan')">
                        <div class="upload-text">
                            <strong>ì‚¬ì—…ê³„íšì„œë¥¼ ì—…ë¡œë“œí•˜ì„¸ìš”</strong><br>
                            PDF, Word, PowerPoint íŒŒì¼ ì§€ì›<br>
                            <small>í´ë¦­í•˜ê±°ë‚˜ íŒŒì¼ì„ ë“œë˜ê·¸í•´ì£¼ì„¸ìš”</small>
                        </div>
                    </div>
                    <input type="file" id="businessPlanInput" accept=".pdf,.doc,.docx,.ppt,.pptx" style="display: none;" multiple>
                    <div id="businessPlanFiles" class="file-list"></div>
                </div>

                <div class="tab-content" id="meeting-audio-tab">
                    <div class="upload-area" id="meetingAudioUpload" onclick="triggerFileUpload('meetingAudio')">
                        <div class="upload-text">
                            <strong>ë¯¸íŒ… ì˜¤ë””ì˜¤ë¥¼ ì—…ë¡œë“œí•˜ì„¸ìš”</strong><br>
                            MP3, WAV, M4A íŒŒì¼ ì§€ì›<br>
                            <small>í´ë¦­í•˜ê±°ë‚˜ íŒŒì¼ì„ ë“œë˜ê·¸í•´ì£¼ì„¸ìš”</small>
                        </div>
                    </div>
                    <input type="file" id="meetingAudioInput" accept=".mp3,.wav,.m4a,.mp4" style="display: none;" multiple>
                    <div id="meetingAudioFiles" class="file-list"></div>
                </div>

                <div class="mentor-input-section">
                    <h3>ğŸ“ ë©˜í†  ì˜ê²¬ ì…ë ¥</h3>
                    <p style="color: #5d4037; margin-bottom: 15px;">ë¯¸íŒ… ì¤‘ ì‘ì„±í•œ ë©˜í†  ì˜ê²¬ì„ ê° ì˜ì—­ë³„ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
                    
                    <label class="input-label">1. ì„±ì¥ë‹¨ê³„ ê´€ë ¨ ì˜ê²¬</label>
                    <textarea id="mentorGrowthInput" class="mentor-textarea" placeholder="ì˜ˆ: í˜„ì¬ MVP ì™„ë£Œ ë‹¨ê³„ì´ë©°, ë² íƒ€ í…ŒìŠ¤í„° í™•ë³´ ìƒíƒœë¥¼ ê³ ë ¤í•  ë•Œ PMF ë‹¨ê³„ê°€ ì í•©í•©ë‹ˆë‹¤. ë‹¤ë§Œ ì˜ë£Œê¸°ê´€ íŒŒíŠ¸ë„ˆì‹­ í™•ëŒ€ê°€ í•„ìš”í•©ë‹ˆë‹¤."></textarea>
                    
                    <label class="input-label">2. KPI ê´€ë ¨ ì˜ê²¬</label>
                    <textarea id="mentorKpiInput" class="mentor-textarea" placeholder="ì˜ˆ: PSF ì„¤ë¬¸ì¡°ì‚¬ ëª©í‘œë¥¼ 100ëª…ì—ì„œ 200ëª…ìœ¼ë¡œ ìƒí–¥ ì¡°ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. MAU ëª©í‘œë„ 15,000ëª…ìœ¼ë¡œ ì¡°ì •í•˜ëŠ” ê²ƒì´ í˜„ì‹¤ì ì…ë‹ˆë‹¤."></textarea>
                    
                    <label class="input-label">3. ì „ëµ ê´€ë ¨ ì˜ê²¬</label>
                    <textarea id="mentorStrategyInput" class="mentor-textarea" placeholder="ì˜ˆ: ì˜ë£Œê¸°ê´€ íŒŒíŠ¸ë„ˆì‹­ í™•ëŒ€ ì „ëµì´ íš¨ê³¼ì ì…ë‹ˆë‹¤. ë‹¤ë§Œ ë°ì´í„° ë³´ì•ˆ ê°•í™”ì— ë” ë§ì€ ì˜ˆì‚° ë°°ì •ì´ í•„ìš”í•©ë‹ˆë‹¤."></textarea>
                    
                    <label class="input-label">4. ê²½ì˜ì§„ë‹¨ ê´€ë ¨ ì˜ê²¬</label>
                    <textarea id="mentorManagementInput" class="mentor-textarea" placeholder="ì˜ˆ: íŒ€ì˜ ì˜ë£Œ AI ì „ë¬¸ì„±ì€ ìš°ìˆ˜í•˜ë‚˜, ê·œì œ ëŒ€ì‘ ì—­ëŸ‰ ê°•í™”ê°€ í•„ìš”í•©ë‹ˆë‹¤. Station C í—¬ìŠ¤ì¼€ì–´ íŠ¹í™” ë©˜í† ë§ì´ í° ë„ì›€ì´ ë  ê²ƒì…ë‹ˆë‹¤."></textarea>
                </div>

                <div class="analysis-status">
                    <h3>ë¶„ì„ ì§„í–‰ìƒí™©</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-info">
                        <div class="progress-text">
                            <span id="progressText">ë¶„ì„ ì¤€ë¹„ ì¤‘...</span>
                        </div>
                    </div>
                    <div id="statusList">
                        <div class="status-item">
                            <div class="status-icon status-pending" id="status-upload">â³</div>
                            <span>íŒŒì¼ ì—…ë¡œë“œ ëŒ€ê¸°ì¤‘</span>
                        </div>
                        <div class="status-item">
                            <div class="status-icon status-pending" id="status-extract">â³</div>
                            <span>ë‚´ìš© ì¶”ì¶œ ëŒ€ê¸°ì¤‘</span>
                        </div>
                        <div class="status-item">
                            <div class="status-icon status-pending" id="status-analyze">â³</div>
                            <span>AI ë¶„ì„ ëŒ€ê¸°ì¤‘</span>
                        </div>
                        <div class="status-item">
                            <div class="status-icon status-pending" id="status-generate">â³</div>
                            <span>ë³´ê³ ì„œ ìƒì„± ëŒ€ê¸°ì¤‘</span>
                        </div>
                    </div>
                </div>

                <button class="btn btn-success" id="analyzeBtn" onclick="startAnalysis()">
                    AI ë¶„ì„ ì‹œì‘ (ë°ëª¨)
                </button>
            </div>

            <div class="analysis-section">
                <h2 class="section-title">ë¶„ì„ ê²°ê³¼</h2>

                <div class="tabs">
                    <button class="tab active" onclick="switchAnalysisTab('extracted')">ì¶”ì¶œëœ ì •ë³´</button>
                    <button class="tab" onclick="switchAnalysisTab('report')">ìƒì„±ëœ ë³´ê³ ì„œ</button>
                </div>

                <div class="tab-content active" id="extracted-tab">
                    <div class="ai-analysis-box">
                        <h3>AI ì¶”ì¶œ ì •ë³´</h3>
                        <p>ì—…ë¡œë“œëœ íŒŒì¼ë“¤ì—ì„œ AIê°€ ìë™ìœ¼ë¡œ ì¶”ì¶œí•œ í•µì‹¬ ì •ë³´ì…ë‹ˆë‹¤.</p>
                    </div>

                    <div class="extracted-content">
                        <div class="content-section">
                            <div class="content-title">ì‚¬ì—…ê³„íšì„œ ìš”ì•½</div>
                            <div class="content-text" id="businessPlanSummary">
                                ì‚¬ì—…ê³„íšì„œë¥¼ ì—…ë¡œë“œí•˜ë©´ AIê°€ ìë™ìœ¼ë¡œ í•µì‹¬ ë‚´ìš©ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.
                            </div>
                        </div>

                        <div class="content-section">
                            <div class="content-title">ë¯¸íŒ… í•µì‹¬ ë‚´ìš©</div>
                            <div class="content-text" id="meetingSummary">
                                ë¯¸íŒ… ì˜¤ë””ì˜¤ë¥¼ ì—…ë¡œë“œí•˜ë©´ AIê°€ ìë™ìœ¼ë¡œ ìŒì„±ì„ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜í•˜ê³  í•µì‹¬ ë‚´ìš©ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.
                            </div>
                        </div>

                        <div class="content-section">
                            <div class="content-title">ì¶”ì¶œëœ KPI</div>
                            <div class="content-text" id="extractedKPIs">
                                ë¬¸ì„œì™€ ë¯¸íŒ…ì—ì„œ ì–¸ê¸‰ëœ í•µì‹¬ì„±ê³¼ì§€í‘œë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="report-tab">
                    <div class="ai-analysis-box">
                        <h3>ìë™ìƒì„± ë³´ê³ ì„œ</h3>
                        <p>Station C ì–‘ì‹ì— ë§ê²Œ ìë™ìœ¼ë¡œ ìƒì„±ëœ ì§„ë‹¨ë³´ê³ ì„œì…ë‹ˆë‹¤.</p>
                    </div>

                    <div class="tabs" style="margin-top: 20px;">
                        <button class="tab active" onclick="switchReportTab('growth')">ì„±ì¥ë‹¨ê³„</button>
                        <button class="tab" onclick="switchReportTab('kpi')">KPI</button>
                        <button class="tab" onclick="switchReportTab('strategy')">ì „ëµ</button>
                        <button class="tab" onclick="switchReportTab('budget')">ì‚¬ì—…ë¹„</button>
                        <button class="tab" onclick="switchReportTab('management')">ê²½ì˜ì§„ë‹¨</button>
                    </div>

                    <div class="tab-content active" id="growth-report">
                        <div class="report-output" id="growthReportOutput">
                            AI ë¶„ì„ì„ ì‹œì‘í•˜ë©´ ì„±ì¥ë‹¨ê³„ ì§„ë‹¨ ë‚´ìš©ì´ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.
                        </div>
                        <button class="copy-btn" onclick="copyToClipboard('growthReportOutput')">ë³µì‚¬</button>
                    </div>

                    <div class="tab-content" id="kpi-report">
                        <div class="report-output" id="kpiReportOutput">
                            AI ë¶„ì„ì„ ì‹œì‘í•˜ë©´ KPI ê´€ë ¨ ë‚´ìš©ì´ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.
                        </div>
                        <button class="copy-btn" onclick="copyToClipboard('kpiReportOutput')">ë³µì‚¬</button>
                    </div>

                    <div class="tab-content" id="strategy-report">
                        <div class="report-output" id="strategyReportOutput">
                            AI ë¶„ì„ì„ ì‹œì‘í•˜ë©´ ì „ëµ ê´€ë ¨ ë‚´ìš©ì´ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.
                        </div>
                        <button class="copy-btn" onclick="copyToClipboard('strategyReportOutput')">ë³µì‚¬</button>
                    </div>

                    <div class="tab-content" id="budget-report">
                        <div class="report-output" id="budgetReportOutput">
                            AI ë¶„ì„ì„ ì‹œì‘í•˜ë©´ ì‚¬ì—…ë¹„ ì‚¬ìš© ê³„íšì´ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.
                        </div>
                        <button class="copy-btn" onclick="copyToClipboard('budgetReportOutput')">ë³µì‚¬</button>
                    </div>

                    <div class="tab-content" id="management-report">
                        <div class="report-output" id="managementReportOutput">
                            AI ë¶„ì„ì„ ì‹œì‘í•˜ë©´ ê²½ì˜ì§„ë‹¨ ë‚´ìš©ì´ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.
                        </div>
                        <button class="copy-btn" onclick="copyToClipboard('managementReportOutput')">ë³µì‚¬</button>
                    </div>

                    <button class="btn btn-success" onclick="exportFullReport()" style="width: 100%; margin-top: 20px;">
                        ì „ì²´ ë³´ê³ ì„œ ë‹¤ìš´ë¡œë“œ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let uploadedFiles = {
            businessPlan: [],
            meetingAudio: []
        };

        let analysisResults = {
            businessPlanSummary: '',
            meetingSummary: '',
            extractedKPIs: '',
            reports: {
                growth: '',
                kpi: '',
                strategy: '',
                budget: '',
                management: ''
            }
        };


        let mentorOpinions = {
            growth: '',
            kpi: '',
            strategy: '',
            management: ''
        };

        function setupFileUploads() {
            setupDragAndDrop('businessPlanUpload', 'businessPlanInput');
            setupDragAndDrop('meetingAudioUpload', 'meetingAudioInput');

            document.getElementById('businessPlanInput').addEventListener('change', (e) => {
                handleFileSelect(e, 'businessPlan');
            });

            document.getElementById('meetingAudioInput').addEventListener('change', (e) => {
                handleFileSelect(e, 'meetingAudio');
            });
        }

        function setupDragAndDrop(uploadAreaId, inputId) {
            const uploadArea = document.getElementById(uploadAreaId);
            const input = document.getElementById(inputId);

            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                uploadArea.addEventListener(eventName, preventDefaults, false);
            });

            ['dragenter', 'dragover'].forEach(eventName => {
                uploadArea.addEventListener(eventName, () => uploadArea.classList.add('dragover'), false);
            });

            ['dragleave', 'drop'].forEach(eventName => {
                uploadArea.addEventListener(eventName, () => uploadArea.classList.remove('dragover'), false);
            });

            uploadArea.addEventListener('drop', (e) => {
                const dt = e.dataTransfer;
                const files = dt.files;
                input.files = files;
                handleFileSelect({ target: input }, uploadAreaId.includes('businessPlan') ? 'businessPlan' : 'meetingAudio');
            }, false);
        }

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        function triggerFileUpload(type) {
            document.getElementById(type + 'Input').click();
        }

        async function handleFileSelect(event, type) {
            const files = Array.from(event.target.files);
            
            // íŒŒì¼ì„ ì„œë²„ì— ì—…ë¡œë“œ
            for (const file of files) {
                try {
                    const formData = new FormData();
                    formData.append('file', file);
                    
                    const uploadType = type === 'businessPlan' ? 'business-plan' : 'meeting-audio';
                    const response = await fetch(`http://localhost:8002/upload/${uploadType}`, {
                        method: 'POST',
                        body: formData
                    });
                    
                    if (response.ok) {
                        const result = await response.json();
                        uploadedFiles[type] = [...uploadedFiles[type], {
                            name: result.filename,
                            file_path: result.file_path,
                            originalFile: file
                        }];
                    } else {
                        console.error('íŒŒì¼ ì—…ë¡œë“œ ì‹¤íŒ¨:', file.name);
                    }
                } catch (error) {
                    console.error('íŒŒì¼ ì—…ë¡œë“œ ì˜¤ë¥˜:', error);
                }
            }
            
            displayFiles(type);
            updateStatus('upload', 'complete');
        }

        function displayFiles(type) {
            const container = document.getElementById(type + 'Files');
            container.innerHTML = '';

            uploadedFiles[type].forEach((file, index) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                
                const typeIcon = getFileTypeIcon(file.name);
                const fileSize = formatFileSize(file.size);

                fileItem.innerHTML = `
                    <div class="file-info">
                        <div style="font-size: 1.5em;">${typeIcon}</div>
                        <div class="file-details">
                            <div class="file-name">${file.name}</div>
                            <div class="file-size">${fileSize}</div>
                        </div>
                    </div>
                    <div class="file-actions">
                        <button class="btn btn-danger btn-sm" onclick="removeFile('${type}', ${index})">ì‚­ì œ</button>
                    </div>
                `;
                container.appendChild(fileItem);
            });
        }

        function getFileTypeIcon(filename) {
            const extension = filename.split('.').pop().toLowerCase();
            const icons = {
                'pdf': 'ğŸ“„', 'doc': 'ğŸ“', 'docx': 'ğŸ“',
                'ppt': 'ğŸ“Š', 'pptx': 'ğŸ“Š',
                'mp3': 'ğŸµ', 'wav': 'ğŸµ', 'm4a': 'ğŸµ', 'mp4': 'ğŸ¬'
            };
            return icons[extension] || 'ğŸ“';
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function removeFile(type, index) {
            uploadedFiles[type].splice(index, 1);
            displayFiles(type);
        }

        function switchUploadTab(tabName) {
            document.querySelectorAll('.upload-section .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            document.querySelectorAll('.upload-section .tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName + '-tab').classList.add('active');
        }

        function switchAnalysisTab(tabName) {
            document.querySelectorAll('.analysis-section > .tabs .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            document.querySelectorAll('.analysis-section > .tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName + '-tab').classList.add('active');
        }

        function switchReportTab(tabName) {
            document.querySelectorAll('#report-tab .tabs .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            document.querySelectorAll('#report-tab .tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName + '-report').classList.add('active');
        }

        async function startAnalysis() {
            // ë©˜í†  ì˜ê²¬ ìˆ˜ì§‘
            mentorOpinions.growth = document.getElementById('mentorGrowthInput').value;
            mentorOpinions.kpi = document.getElementById('mentorKpiInput').value;
            mentorOpinions.strategy = document.getElementById('mentorStrategyInput').value;
            mentorOpinions.management = document.getElementById('mentorManagementInput').value;

            // ì§„í–‰ ìƒí™© ì´ˆê¸°í™”
            updateProgressText('ë¶„ì„ì„ ì‹œì‘í•©ë‹ˆë‹¤...');

            updateStatus('extract', 'processing');
            updateProgress(20);

            try {
                // ì‹¤ì œ API í˜¸ì¶œ
                updateProgressText('ì„œë²„ì— ë¶„ì„ ìš”ì²­ì„ ì „ì†¡ ì¤‘...');
                updateProgress(30);
                
                const request = {
                    mentor_input: mentorOpinions,
                    business_plan_files: uploadedFiles.businessPlan.map(f => f.file_path),
                    meeting_audio_files: uploadedFiles.meetingAudio.map(f => f.file_path)
                };

                updateProgressText('ì‚¬ì—…ê³„íšì„œ OCR ì²˜ë¦¬ ì¤‘...');
                updateProgress(40);

                const response = await fetch('http://localhost:8002/analyze', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(request)
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                // API í˜¸ì¶œ ì™„ë£Œ í›„ ë‹¨ê³„ë³„ ì§„í–‰ ìƒí™© í‘œì‹œ
                updateProgressText('ë¯¸íŒ… ì˜¤ë””ì˜¤ STT ì²˜ë¦¬ ì¤‘...');
                updateProgress(50);
                
                // STT ì²˜ë¦¬ ì‹œê°„ì„ ê³ ë ¤í•œ ëŒ€ê¸° (ì˜¤ë””ì˜¤ íŒŒì¼ì´ ìˆì„ ë•Œë§Œ)
                if (uploadedFiles.meetingAudio.length > 0) {
                    await sleep(3000); // STTëŠ” ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¼
                } else {
                    await sleep(1000);
                }
                
                updateProgressText('AI ë¶„ì„ ë° ë³´ê³ ì„œ ìƒì„± ì¤‘...');
                updateProgress(70);
                
                // GPT ë¶„ì„ ì‹œê°„ì„ ê³ ë ¤í•œ ëŒ€ê¸°
                await sleep(3000);
                
                updateProgressText('ë¶„ì„ ê²°ê³¼ë¥¼ ì²˜ë¦¬ ì¤‘...');
                updateProgress(80);

                const results = await response.json();
                
                updateProgressText('ì§„ë‹¨ë³´ê³ ì„œë¥¼ ìƒì„± ì¤‘...');
                updateProgress(90);
                
                // ê²°ê³¼ ì²˜ë¦¬ ì‹œê°„ì„ ê³ ë ¤í•œ ëŒ€ê¸°
                await sleep(1500);
                
                updateProgressText('ìµœì¢… ë³´ê³ ì„œë¥¼ ì •ë¦¬ ì¤‘...');
                updateProgress(95);
                
                await sleep(1000);
                
                // ê²°ê³¼ë¥¼ í™”ë©´ì— í‘œì‹œ
                analysisResults.businessPlanSummary = results.business_plan_summary;
                analysisResults.meetingSummary = results.meeting_summary;
                analysisResults.extractedKPIs = results.extracted_kpis;
                analysisResults.reports = results.reports;

                document.getElementById('businessPlanSummary').textContent = results.business_plan_summary;
                document.getElementById('meetingSummary').textContent = results.meeting_summary;
                document.getElementById('extractedKPIs').textContent = results.extracted_kpis;
                document.getElementById('growthReportOutput').textContent = results.reports.growth;
                document.getElementById('kpiReportOutput').textContent = results.reports.kpi;
                document.getElementById('strategyReportOutput').textContent = results.reports.strategy;
                document.getElementById('managementReportOutput').textContent = results.reports.management;
                document.getElementById('budgetReportOutput').textContent = results.reports.budget;

                updateStatus('extract', 'complete');
                updateStatus('analyze', 'complete');
            updateStatus('generate', 'complete');
            updateProgress(100);
                
                updateProgressText('ë¶„ì„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');

            } catch (error) {
                console.error('ë¶„ì„ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
                
                // ì˜¤ë¥˜ ë°œìƒ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
                const errorMessage = `API ì—°ê²° ì˜¤ë¥˜: ${error.message}`;
                analysisResults.businessPlanSummary = errorMessage;
                analysisResults.meetingSummary = errorMessage;
                analysisResults.extractedKPIs = errorMessage;
                analysisResults.reports = {
                    growth: errorMessage,
                    kpi: errorMessage,
                    strategy: errorMessage,
                    management: errorMessage,
                    budget: errorMessage
                };

                document.getElementById('businessPlanSummary').textContent = errorMessage;
                document.getElementById('meetingSummary').textContent = errorMessage;
                document.getElementById('extractedKPIs').textContent = errorMessage;
                document.getElementById('growthReportOutput').textContent = errorMessage;
                document.getElementById('kpiReportOutput').textContent = errorMessage;
                document.getElementById('strategyReportOutput').textContent = errorMessage;
                document.getElementById('managementReportOutput').textContent = errorMessage;
                document.getElementById('budgetReportOutput').textContent = errorMessage;

                updateStatus('extract', 'complete');
                updateStatus('analyze', 'complete');
            updateStatus('generate', 'complete');
            updateProgress(100);
            }
        }

        async function simulateBusinessPlanAnalysis() {
            await sleep(2000);

            // ì‹¤ì œ API í˜¸ì¶œë¡œ ì‚¬ì—…ê³„íšì„œ ë¶„ì„
            try {
                const response = await fetch('http://localhost:8002/analyze', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        business_plan_files: uploadedFiles.businessPlan,
                        meeting_audio_files: uploadedFiles.meetingAudio,
                        mentor_input: {
                            growth: document.getElementById('mentorGrowth').value,
                            kpi: document.getElementById('mentorKPI').value,
                            strategy: document.getElementById('mentorStrategy').value,
                            management: document.getElementById('mentorManagement').value
                        }
                    })
                });

                if (response.ok) {
                    const result = await response.json();
                    analysisResults.businessPlanSummary = result.business_plan_summary;
                    document.getElementById('businessPlanSummary').textContent = result.business_plan_summary;
                } else {
                    throw new Error('API í˜¸ì¶œ ì‹¤íŒ¨');
                }
            } catch (error) {
                console.error('ì‚¬ì—…ê³„íšì„œ ë¶„ì„ ì˜¤ë¥˜:', error);
                const errorMessage = 'ì‚¬ì—…ê³„íšì„œ ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
                analysisResults.businessPlanSummary = errorMessage;
                document.getElementById('businessPlanSummary').textContent = errorMessage;
            }
        }

        async function simulateMeetingAudioAnalysis() {
            await sleep(3000);
            
            // ì‹¤ì œ API í˜¸ì¶œë¡œ ë¯¸íŒ… ì˜¤ë””ì˜¤ ë¶„ì„ (STT + GPT)
            try {
                const response = await fetch('http://localhost:8002/analyze', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        business_plan_files: uploadedFiles.businessPlan,
                        meeting_audio_files: uploadedFiles.meetingAudio,
                        mentor_input: {
                            growth: document.getElementById('mentorGrowth').value,
                            kpi: document.getElementById('mentorKPI').value,
                            strategy: document.getElementById('mentorStrategy').value,
                            management: document.getElementById('mentorManagement').value
                        }
                    })
                });

                if (response.ok) {
                    const result = await response.json();
                    analysisResults.meetingSummary = result.meeting_summary;
                    document.getElementById('meetingSummary').textContent = result.meeting_summary;
                    
                    analysisResults.extractedKPIs = result.extracted_kpis;
                    document.getElementById('extractedKPIs').textContent = result.extracted_kpis;
                } else {
                    throw new Error('API í˜¸ì¶œ ì‹¤íŒ¨');
                }
            } catch (error) {
                console.error('ë¯¸íŒ… ì˜¤ë””ì˜¤ ë¶„ì„ ì˜¤ë¥˜:', error);
                const errorMessage = 'ë¯¸íŒ… ì˜¤ë””ì˜¤ ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
                analysisResults.meetingSummary = errorMessage;
                document.getElementById('meetingSummary').textContent = errorMessage;
                
                analysisResults.extractedKPIs = errorMessage;
                document.getElementById('extractedKPIs').textContent = errorMessage;
            }
        }

        async function generateReports() {
            await sleep(2000);

            // ì‹¤ì œ API í˜¸ì¶œë¡œ ë³´ê³ ì„œ ìƒì„±
            try {
                const response = await fetch('http://localhost:8002/analyze', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        business_plan_files: uploadedFiles.businessPlan,
                        meeting_audio_files: uploadedFiles.meetingAudio,
                        mentor_input: {
                            growth: document.getElementById('mentorGrowth').value,
                            kpi: document.getElementById('mentorKPI').value,
                            strategy: document.getElementById('mentorStrategy').value,
                            management: document.getElementById('mentorManagement').value
                        }
                    })
                });

                if (response.ok) {
                    const result = await response.json();
                    
                    // ì„±ì¥ë‹¨ê³„ ì§„ë‹¨ ë³´ê³ ì„œ
                    analysisResults.reports.growth = result.reports.growth;
                    document.getElementById('growthReportOutput').textContent = result.reports.growth;

            // KPI ë³´ê³ ì„œ
                    analysisResults.reports.kpi = result.reports.kpi;
                    document.getElementById('kpiReportOutput').textContent = result.reports.kpi;

            // ì „ëµ ë³´ê³ ì„œ
                    analysisResults.reports.strategy = result.reports.strategy;
                    document.getElementById('strategyReportOutput').textContent = result.reports.strategy;

            // ê²½ì˜ì§„ë‹¨ ë³´ê³ ì„œ
                    analysisResults.reports.management = result.reports.management;
                    document.getElementById('managementReportOutput').textContent = result.reports.management;
                    
                    // ì‚¬ì—…ë¹„ ë³´ê³ ì„œ
                    analysisResults.reports.budget = result.reports.budget;
                    document.getElementById('budgetReportOutput').textContent = result.reports.budget;
                } else {
                    throw new Error('API í˜¸ì¶œ ì‹¤íŒ¨');
                }
            } catch (error) {
                console.error('ë³´ê³ ì„œ ìƒì„± ì˜¤ë¥˜:', error);
                const errorMessage = 'ë³´ê³ ì„œ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
                
                analysisResults.reports.growth = errorMessage;
                document.getElementById('growthReportOutput').textContent = errorMessage;
                
                analysisResults.reports.kpi = errorMessage;
                document.getElementById('kpiReportOutput').textContent = errorMessage;
                
                analysisResults.reports.strategy = errorMessage;
                document.getElementById('strategyReportOutput').textContent = errorMessage;
                
                analysisResults.reports.management = errorMessage;
                document.getElementById('managementReportOutput').textContent = errorMessage;
                
                analysisResults.reports.budget = errorMessage;
                document.getElementById('budgetReportOutput').textContent = errorMessage;
            }
        }

        function updateStatus(step, status) {
            const statusElement = document.getElementById('status-' + step);
            statusElement.className = 'status-icon status-' + status;
            
            const icons = {
                'pending': 'â³',
                'processing': 'ğŸ”„',
                'complete': 'âœ…'
            };
            
            statusElement.textContent = icons[status];
        }

        function updateProgress(percentage) {
            document.getElementById('progressFill').style.width = percentage + '%';
        }

        function updateProgressText(text) {
            document.getElementById('progressText').textContent = text;
        }


        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        function copyToClipboard(elementId) {
            const text = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(text).then(function() {
                const button = event.target;
                const originalText = button.textContent;
                button.textContent = 'ë³µì‚¬ì™„ë£Œ';
                
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            });
        }

        function exportFullReport() {
            const currentDate = new Date().toLocaleDateString('ko-KR');
            
            let fullReport = `Station C 2025 AI ì§„ë‹¨ë³´ê³ ì„œ\n`;
            fullReport += `ìƒì„±ì¼: ${currentDate}\n`;
            fullReport += `AI ë¶„ì„ ê¸°ë°˜ ìë™ìƒì„± ë³´ê³ ì„œ\n`;
            fullReport += `${'='.repeat(60)}\n\n`;
            
            fullReport += `ğŸ“„ ì‚¬ì—…ê³„íšì„œ ë¶„ì„ ê²°ê³¼\n`;
            fullReport += `${'-'.repeat(40)}\n`;
            fullReport += `${analysisResults.businessPlanSummary}\n\n`;
            
            fullReport += `ğŸ¤ ë¯¸íŒ… ë¶„ì„ ê²°ê³¼\n`;
            fullReport += `${'-'.repeat(40)}\n`;
            fullReport += `${analysisResults.meetingSummary}\n\n`;
            
            fullReport += `ğŸ“Š ì¶”ì¶œëœ KPI\n`;
            fullReport += `${'-'.repeat(40)}\n`;
            fullReport += `${analysisResults.extractedKPIs}\n\n`;
            
            fullReport += `${'='.repeat(60)}\n`;
            fullReport += `ğŸ“‹ ìë™ìƒì„± ì§„ë‹¨ë³´ê³ ì„œ\n`;
            fullReport += `${'='.repeat(60)}\n\n`;
            
            fullReport += `${analysisResults.reports.growth}\n\n`;
            fullReport += `${'-'.repeat(50)}\n\n`;
            fullReport += `${analysisResults.reports.kpi}\n\n`;
            fullReport += `${'-'.repeat(50)}\n\n`;
            fullReport += `${analysisResults.reports.strategy}\n\n`;
            fullReport += `${'-'.repeat(50)}\n\n`;
            fullReport += `${analysisResults.reports.budget}\n\n`;
            fullReport += `${'-'.repeat(50)}\n\n`;
            fullReport += `${analysisResults.reports.management}\n`;
            
            const blob = new Blob([fullReport], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Station_C_AIì§„ë‹¨ë³´ê³ ì„œ_${currentDate.replace(/\./g, '')}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        document.addEventListener('DOMContentLoaded', function() {
            setupFileUploads();
        });
    </script>
</body>
</html>